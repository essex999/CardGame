<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div class="timer">
            <div class="minutes">00</div>
            <p>:</p>
            <div class="seconds">00</div>
        </div>

        <script>
            class cardGame {
                constructor(container) {
                    this.sss = 0
                    this.timerValue = ''

                    this.container = container
                    this.gameLvlSelect()
                }

                gameLvlSelect() {
                    this.container.replaceChildren()
                    const button = document.createElement('button')
                    container.appendChild(button)
                    button.textContent = 'go'
                    button.classList.add('go')
                    const button2 = document.createElement('button')
                    container.appendChild(button2)
                    button2.textContent = 'stop'
                    button2.classList.add('stop')
                    const go = document.querySelector('.go')
                    const stop = document.querySelector('.stop')

                    go.addEventListener('click', () => {
                        this.timer()
                    })

                    stop.addEventListener('click', () => {
                        this.sss = 1
                    })
                }

                timer() {
                    const minutesLabel = document.querySelector('.minutes')
                    const secondsLabel = document.querySelector('.seconds')
                    let finalTime = minutesLabel + ':' + secondsLabel
                    let totalSeconds = 0
                    let xx = 0

                    const gameTimer = setInterval(setTime, 1000)
                    const checkTimer = setInterval(() => {
                        xx = this.sss
                    }, 500)
                    function setTime() {
                        if (xx === 1) {
                            clearTimeout(gameTimer)
                            clearTimeout(checkTimer)
                            this.timerValue =
                                minutesLabel.textContent +
                                ':' +
                                secondsLabel.textContent
                            console.log(this.timerValue)
                            return
                        } else {
                            ++totalSeconds
                            secondsLabel.textContent = pad(totalSeconds % 60)
                            minutesLabel.textContent = pad(
                                parseInt(totalSeconds / 60)
                            )
                        }
                    }

                    function pad(val) {
                        const valString = val + ''
                        if (valString.length < 2) {
                            return '0' + valString
                        } else {
                            return valString
                        }
                    }
                }
            }
        </script>
    </body>
</html>
